// Fix the annual display to show calculated percentage instead of raw calculation

// Replace lines 1163-1170 in AnalyticsView.tsx with this:

<div className="flex justify-between text-xs text-slate-500 mt-1">
  <span>Annual: {(() => {
    const parentIndicator = INDICATORS.find(ind => 
      ind.subIndicatorIds && Object.values(ind.subIndicatorIds).includes(sub.id)
    );
    
    // For percentage indicators 69, 99, 101, use calculated percentage
    if (parentIndicator && ['69', '99', '101'].includes(parentIndicator.id)) {
      const calculatedPercentage = sub.calculatedPercentage || 0;
      const subIndicatorData = INDICATORS.find(ind => ind.id === sub.id);
      const annualTargetPercentage = parseValue(subIndicatorData?.targets.annual || 0);
      return `${calculatedPercentage.toFixed(1)}% of ${annualTargetPercentage}%`;
    }
    
    // Regular calculation for other indicators
    const subIndicatorData = INDICATORS.find(ind => ind.id === sub.id);
    const subAnnualTarget = parseValue(subIndicatorData?.targets.annual || 0);
    const subAnnualProgress = subAnnualTarget > 0 ? Math.min(Math.round((sub.actual / subAnnualTarget) * 100), 100) : 0;
    return `${subAnnualProgress}% of ${subAnnualTarget.toLocaleString()}`;
  })()}</span>
</div>
