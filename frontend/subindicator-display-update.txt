// Update the sub-indicator display in AnalyticsView.tsx to show calculated percentage and goal status

// Replace the existing sub-indicator display section (around lines 1056-1059 and the progress bar section)

// NEW DISPLAY CODE:
<div className="flex justify-between text-xs text-slate-500">
  <span>{sub.actual.toLocaleString()} actual</span>
  <span>
    {(() => {
      const subIndicatorData = INDICATORS.find(ind => ind.id === sub.id);
      const parentIndicator = INDICATORS.find(ind => 
        ind.subIndicatorIds && Object.values(ind.subIndicatorIds).includes(sub.id)
      );
      
      // Check if this is a percentage sub-indicator from indicators 69, 99, or 101
      if (parentIndicator && ['69', '99', '101'].includes(parentIndicator.id) && subIndicatorData) {
        const quarterId = selectedQuarter?.id || 'q1';
        const percentageTarget = parseValue((subIndicatorData.targets as any)[quarterId]);
        const calculatedPercentage = sub.calculatedPercentage || 0;
        const goalMet = calculatedPercentage >= percentageTarget;
        
        return `${calculatedPercentage}% (${goalMet ? '✅ Goal Met' : '❌ Goal Not Met'})`;
      }
      
      return `${sub.target.toLocaleString()} quarterly target`;
    })()}
  </span>
</div>

// And update the progress bar to show the calculated percentage instead of performance for these indicators
<div className="w-full bg-slate-100 h-1.5 rounded-full overflow-hidden">
  {(() => {
    const parentIndicator = INDICATORS.find(ind => 
      ind.subIndicatorIds && Object.values(ind.subIndicatorIds).includes(sub.id)
    );
    
    // For percentage indicators 69, 99, 101, show calculated percentage
    if (parentIndicator && ['69', '99', '101'].includes(parentIndicator.id)) {
      const displayPercentage = sub.calculatedPercentage || 0;
      const subColor = getPerformanceColor(sub.performance);
      return (
        <div
          className={`h-full bg-${subColor}-500 rounded-full transition-all duration-500`}
          style={{ width: `${Math.min(displayPercentage, 100)}%` }}
        ></div>
      );
    }
    
    // Regular progress bar for other indicators
    const subColor = getPerformanceColor(sub.performance);
    return (
      <div
        className={`h-full bg-${subColor}-500 rounded-full transition-all duration-500`}
        style={{ width: `${Math.min(sub.performance, 100)}%` }}
      ></div>
    );
  })()}
</div>
